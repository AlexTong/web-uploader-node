//devin87@qq.com
//build:2015/10/26 14:09:15
!function(i,s){"use strict";function e(i,s){i.className+=" "+s}function a(i,s){i&&(i.innerHTML=s||"")}var t=Q.def,d=Q.getFirst,v=Q.getLast,l=Q.getNext,c=Q.createEle,o=Q.formatSize,n=Q.event,r=n.add,u=Q.Uploader;u.extend({init:function(){var i=this.ops.view;i&&e(i,this.html5?"html5":"html4")},draw:function(i){var s=this,e=s.ops,a=e.view;if(a){var l=e.button||{},o=t(l.cancel,"取消"),n=t(l.remove,"删除"),u=i.name,p='<div class="fl"><div class="u-name" title="'+u+'">'+u+'</div></div><div class="fr"><div class="u-size"></div><div class="u-speed">--/s</div><div class="u-progress-bar"><div class="u-progress" style="width:1%;"></div></div><div class="u-detail">0%</div><div class="u-state"></div><div class="u-op"><a class="u-op-cancel">'+o+'</a><a class="u-op-remove">'+n+'</a></div></div><div class="clear"></div>',f=i.id,h=c("div","u-item",p);h.taskId=f,i.box=h,a.appendChild(h);var m=v(h.childNodes[1]),x=d(m),Q=v(m);r(x,"click",function(){s.cancel(f)}),r(Q,"click",function(){s.remove(f),a.removeChild(h)}),s.update(i)}},update:function(i){if(i&&i.box){var e=i.total||i.size,t=i.loaded,v=i.state,c=i.box,n=c.childNodes[1],r=d(n),p=l(r),f=l(p),h=d(f),m=l(f),x=l(m);if(a(x,u.getStatusText(v)),!(0>e)){var Q="";if(this.html5&&t!=s&&t>=0){var b;if(v==u.PROCESSING){var g=Math.min(100*t/e,100);b=g.toFixed(1),"100.0"==b&&(b="99.9")}else v==u.COMPLETE&&(b="100");b&&(b+="%",h.style.width=b,a(m,b)),Q='<span class="u-loaded">'+o(t)+"</span> / ";var w=i.avgSpeed||i.speed;a(p,o(w)+"/s")}Q+='<span class="u-total">'+o(e)+"</span>",a(r,Q)}}},over:function(i){i&&i.box&&e(i.box,"u-over")}})}(window);